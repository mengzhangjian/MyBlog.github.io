---
layout:     post

title:      电影聚合网站的建设-前后端建站全过程回顾

subtitle:   Programming Massively Parallel Processors

date:       2023-04-20

author:     BY  张建

header-img: img/post-bg-mma-4.jpg

catalog: true

tags:

    - 兴趣爱好
---

​		疫情三年，经历很多了事情，年纪也来到了32岁，这三年熟悉的朋友大部分都离开了北京，自己的心境也发生了很多变化，由焦虑、抑郁逐渐转为目前的自洽，才发现这是一场与自己斗争的战争，幸运的事，这场战争目前我幸存下来了。由于在抗争的过程中，发现自己的时间原来可以去做好多事情，不是只躺在床上打游戏浪费时间，时间真是个好东西。

​		言归正传，本篇呢，是今年开始逐渐给自己找事做，自己建了一个小站的项目总结。当然，现在本站只是一个小开始，会慢慢优化并丰富内容。大家可以先去目睹一下[元气](https://yuanqi.plus)。![](https://res.cloudinary.com/dsn0i1fsm/image/upload/v1686735965/yuanqi_qayg4v.png)

元气电影网站的建设的初衷是因为想提供给大家更精确、且可以聚合的搜索结果，后来经过调研发现已经有不少的同类网站，但出于练手目的，还是想尝试下。下面我将重点介绍一下，整个的搭建过程。

​        网站的建设主要包含数据准备、前后端实现以及网站部署过程。

## 数据准备工作

​		作为电影聚合网站，数据部分自然是需要各影视种类的信息及相关影视的播放地址。第一部分电影信息的数据库建设通过爬取豆瓣网站完成。第二部分则是根据爬取的豆瓣电影信息调取聚合搜索，进行结果的过滤，只保留高质量影视网站信息来完成。

#### 豆瓣爬取

​		豆瓣电影信息的爬取根据公开可搜取的教程，基本都是爬取TOP250电影及豆瓣影视种类首页的教程，但是豆瓣影视种类为了防爬取，每个种类最多只有500部，这对于我们的聚合网站来说，数量太少，远远不够用。另外一种方式为豆瓣提供了查询API，网站可只展示部分影视信息，搜索时调用豆瓣API即可，这种方式最容易，且实施成本最小，但该方式需要同豆瓣公司以公司名义进行合作，所以该方法也不可行了。

​       基于以上分析，只有想办法尽可能的爬取豆瓣的影视信息并抱以后缺啥补啥的原则，对我们来说是最可行的。豆瓣的影视链接最后都是以随机整数结尾，经过初步分析后，我们发现该ID在1200000到36000000之间分布，但是由于反爬虫措施，我们不可能进行全部遍历。通过尽可能的网上搜寻，我们获取了一份早期网友爬取的豆瓣ID列表信息，数量级大概在10万左右，通过之前我们遍历的部分ID，总的量级大概在11万左右，当然这个数量级还远远够不到所有发布的电影数量。下面将简要介绍，是如何对单个影视页进行爬取的。

![豆瓣](https://res.cloudinary.com/dsn0i1fsm/image/upload/v1686295371/%E8%B1%86%E7%93%A3_zhbwcs.png) 

​		如图上所示，我们仅需要中间至右侧的所有信息，该部分我们可通过谷歌浏览器查看网页源码，并借助xpath路径，获得相关信息。由于我用的python，所以借助parsel，便可轻松实现该部分的信息爬取。

​       未完待续...
